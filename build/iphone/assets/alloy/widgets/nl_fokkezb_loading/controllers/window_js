function WPATH(e){var t=e.lastIndexOf("/"),i=-1===t?"nl.fokkezb.loading/"+e:e.substring(0,t)+"/nl.fokkezb.loading/"+e.substring(t+1);return i}function Controller(){function e(){s.loadingMask.images?(w=!0,s.loadingInner.remove(s.loadingIndicator),s.loadingIndicator=null):(s.loadingInner.remove(s.loadingImages),s.loadingImages=null),t(u.message,u.cancelable),u=null}function t(e,t){s.loadingMessage.text=e||L("loadingMessage","Loading..."),g=t}function i(){g&&(l(),_.isFunction(g)&&g())}function o(){Ti.API.debug("window open "+s.loadingMask.n),s.loadingMask.open(),w?s.loadingImages.start():s.loadingIndicator.show()}function l(){a()}function a(){s.loadingMask.close(),w?s.loadingImages.stop():s.loadingIndicator.hide(),g=null}function n(){s.hasFocus=!0}function r(){s.hasFocus=!1}new(require("alloy/widget"))("nl.fokkezb.loading"),this.__widgetId="nl.fokkezb.loading",require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="window",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var s=this,d={},c={};s.__views.loadingMask=Ti.UI.createWindow({backgroundColor:"#5000",backgroundImage:null,opacity:1,modal:!1,id:"loadingMask"}),s.__views.loadingMask&&s.addTopLevelView(s.__views.loadingMask),i?s.__views.loadingMask.addEventListener("click",i):c["$.__views.loadingMask!click!cancel"]=!0,n?s.__views.loadingMask.addEventListener("focus",n):c["$.__views.loadingMask!focus!onFocus"]=!0,r?s.__views.loadingMask.addEventListener("blur",r):c["$.__views.loadingMask!blur!onBlur"]=!0,s.__views.loadingOuter=Ti.UI.createView({width:Ti.UI.SIZE,height:Ti.UI.SIZE,borderRadius:10,backgroundColor:"#C000",id:"loadingOuter"}),s.__views.loadingMask.add(s.__views.loadingOuter),s.__views.loadingInner=Ti.UI.createView({top:"20dp",right:"20dp",bottom:"20dp",left:"20dp",width:Ti.UI.SIZE,height:Ti.UI.SIZE,layout:"vertical",id:"loadingInner"}),s.__views.loadingOuter.add(s.__views.loadingInner),s.__views.loadingIndicator=Ti.UI.createActivityIndicator({top:"0dp",style:Ti.UI.iPhone.ActivityIndicatorStyle.BIG,id:"loadingIndicator"}),s.__views.loadingInner.add(s.__views.loadingIndicator),s.__views.loadingImages=Ti.UI.createImageView({top:"0dp",images:["/images/nl.fokkezb.loading/00.png","/images/nl.fokkezb.loading/01.png","/images/nl.fokkezb.loading/02.png","/images/nl.fokkezb.loading/03.png","/images/nl.fokkezb.loading/04.png","/images/nl.fokkezb.loading/05.png","/images/nl.fokkezb.loading/06.png","/images/nl.fokkezb.loading/07.png","/images/nl.fokkezb.loading/08.png","/images/nl.fokkezb.loading/09.png","/images/nl.fokkezb.loading/10.png","/images/nl.fokkezb.loading/11.png"],id:"loadingImages"}),s.__views.loadingInner.add(s.__views.loadingImages),s.__views.loadingMessage=Ti.UI.createLabel({top:"20dp",width:Ti.UI.SIZE,height:Ti.UI.SIZE,text:L("loadingMessage","Loading.."),color:"#fff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"loadingMessage"}),s.__views.loadingInner.add(s.__views.loadingMessage),d.destroy=function(){},_.extend(s,s.__views);var u=arguments[0]||{},w=!1,g=!1;e(),d.hasFocus=!0,d.open=o,d.update=t,d.close=l,c["$.__views.loadingMask!click!cancel"]&&s.__views.loadingMask.addEventListener("click",i),c["$.__views.loadingMask!focus!onFocus"]&&s.__views.loadingMask.addEventListener("focus",n),c["$.__views.loadingMask!blur!onBlur"]&&s.__views.loadingMask.addEventListener("blur",r),_.extend(s,d)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;