var Alloy=require("alloy"),_=Alloy._,Backbone=Alloy.Backbone;Alloy.Globals.serverPath="http://limitless-eyrie-1080.herokuapp.com/",Alloy.Globals.votingIdealTimer=2e3,Alloy.Globals.matches=[],Alloy.Globals.currentMatchIndex=-1,Alloy.Collections.filters=Alloy.createCollection("filter"),Alloy.Globals.activeFilterRowColor="#CCDDE4",Alloy.Globals.normalFilterRowColor="#eef5f8",Alloy.Globals.activeFilterRow,Alloy.Globals.selectedFilter=-1,Alloy.Globals.setSelectedFilter=function(e){Alloy.Globals.selectedFilter=e,Titanium.App.Properties.setInt("selectedFilter",e)},Alloy.Globals.getSelectedFilter=function(){return Alloy.Globals.selectedFilter=Titanium.App.Properties.getInt("selectedFilter"),Alloy.Globals.selectedFilter},Titanium.App.Properties.getInt("settingsLoaded")||(Alloy.Globals.setSelectedFilter(1),Titanium.App.Properties.setInt("settingsLoaded",!0)),Alloy.Globals.isiOS7Plus=function(){var e=Titanium.Platform.version.split("."),t=parseInt(e[0],10);return t>=7?!0:!1},Alloy.Globals.loading=Alloy.createWidget("nl.fokkezb.loading"),Alloy.Globals.createTableSectionHeaderViewForAccordian=function(e){var t=Alloy.createController("accordianSectionHeaderView",e).getView(),i=Ti.UI.createTableViewSection({headerView:t});return t.section=i,i},Alloy.Globals.createTableSectionHeaderView=function(e,t){var i=Ti.UI.createView({height:"36",backgroundColor:"#bfd9e4",borderColor:"#FFF"}),o=Ti.UI.createLabel({top:"6",bottom:"6",left:"10",right:"10",text:e,font:{fontSize:"16",fontWeight:"bold"},color:"#808080"});if(t){var l=Ti.UI.createImageView({image:t,left:10});i.add(l),o.left=30}i.add(o);var a=Ti.UI.createTableViewSection({headerView:i});return a},Alloy.Globals.buttonFocused=function(e){e.source.setBackgroundColor("#000")},Alloy.Globals.buttonBlurred=function(e){e.source.setBackgroundColor("#30D1F4")},Alloy.Globals.buttonBlurredGray=function(e){e.source.setBackgroundColor("#808080")},Alloy.Globals.objectOpacityOnFocused=function(e){e.source.setOpacity(.7)},Alloy.Globals.objectOpacityOnBlurred=function(e){e.source.setOpacity(1)},Alloy.Globals.parseURL=function(e){return parsed_url={},null==e||0==e.length?parsed_url:(protocol_i=e.indexOf("://"),parsed_url.protocol=e.substr(0,protocol_i),remaining_url=e.substr(protocol_i+3,e.length),domain_i=remaining_url.indexOf("/"),domain_i=-1==domain_i?remaining_url.length-1:domain_i,parsed_url.domain=remaining_url.substr(0,domain_i),parsed_url.domain)},Alloy.Globals.loginFirst=function(e){Ti.API.info(e);var t={};t.popUpLabel="You need to log in to do that.",t.but1Label="Log In",t.but2label="Never mind",t.but1handler=function(){i.close();var t=Alloy.createController("login"),o=t.getView();o.addEventListener("close",function(){Alloy.Globals.APIKey&&e()}),Alloy.Globals.navgroup.open(o)},t.but2handler=function(){i.close()};var i=Alloy.createController("popUpWindow",t).getView();i.open()},Date.prototype.format=function(e){var t=this.getHours(),i="AM";e.indexOf("t")>-1&&t>12&&(t-=12,i="PM");var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":t,"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds(),"t+":i};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var l in o)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[l]:("00"+o[l]).substr((""+o[l]).length)));return e},Alloy.createController("index");